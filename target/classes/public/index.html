<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
.getfield{
  height:px;
  width:px;
  overwirte:visible;
  
}
.div_input{
 height:4752px;
 width:1200px;
 position:absolute;
 top:0px;
 left:0px;
 
} 
.inputfield{
 /*  top:50px;
  left:50px;
  height:30px;
  width:100px; */
  padding:0;
  margin:0;
  border:none;
  position:absolute;
  opacity:0;
}
.button{
	 z-index: 999;
	 height: 50px;
	 width:100px;

}

</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
	
	<img class="getfield" src=""/>
	<div class="div_input">  <button class="button"  onclick="GetText()">Save</button> </div>
</body>
<script>
var img = new Image();
img.src = "/ImageSample";
img.onload = function(){
  
  imgHeight = img.height;
  imgWidth = img.width;
  
/*   console.log("img width: "+imgWidth);ff
  console.log("img height: "+imgHeight);
 */
}


$(document).ready(function(){
			$("img.getfield").attr("src",img.src);
			$("img.getfield").on("load",function(e){
				var wrapper         = $(".div_input");
				var offsetX = this.offsetLeft;
				var offsetY = this.offsetTop;
				
	
				 $.get("/pdf/fields", function(data){
					 /* console.log(data); */
					 
					 for(i=1;i<data.length;i++){
					 
					 imgFieldX = offsetX + data[i].xpercent*imgWidth;
					 //console.log(imgFieldX);
					 /* console.log(imgFieldX); */
					 imgFieldY = offsetY + data[i].ypercent*imgHeight;
					 
					 imgFieldWidth = imgWidth * data[i].widthPercent;
					
					 imgFieldHeight = imgHeight *data[i].heightPercent;
					 
					 $(wrapper).append('<input class="inputfield" name ="' + data[i].name + '"  value ="' + data[i].value + '" type="text"/>');
					 var x = document.getElementsByClassName('inputfield');
					 x[i-1].style.width = imgFieldWidth+"px";
					 x[i-1].style.height = imgFieldHeight+"px"; 
					 x[i-1].style.top = imgFieldY+"px";
					 x[i-1].style.left = imgFieldX+"px";
					
					 }

			      });
			});
		
			
			
	
			
			$(".div_input").on("click",".inputfield",function(){
				$(this).css('opacity','0.5');
				
				});
			
			$(".div_input").on("blur",".inputfield",function(){
				$(this).css('opacity','1');
				
				});
			
			
	});

	
function GetText() {
	var input;
	var myJson = [];
	
	
	 $(".inputfield").each(function () {
		input = $(this).val();
		myJson.push({
			
			"name": $(this).attr("name"),
			"value": input
			
		});
		console.log(myJson["name"],myJson["value"]);
	});

	$.ajax({
		url:"/pdf/fields",
		type:"POST",
		data: JSON.stringify(myJson),
		dataType:"json",
		
		contentType : 'application/json; charset=utf-8',
		success:function(data){
			
			alert("123!");
		}
	});
	
}
</script>
</html>
